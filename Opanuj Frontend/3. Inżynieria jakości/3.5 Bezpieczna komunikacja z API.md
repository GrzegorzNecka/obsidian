### **Poznaj standard OpenAPI**

Fundamentem Å¼ywej dokumentacji i powszechnie obowiÄ…zujÄ…cym standardem jest dzisiaj [**OpenAPI**](https://www.openapis.org/), czyli sposÃ³b na usystematyzowanie i standaryzacjÄ™ interakcji miÄ™dzy producentami i konsumentami API.

**OpenAPI**, pierwotnie znane jako **Swagger**, jest specyfikacjÄ… powstaÅ‚Ä… w 2011r., opracowanÄ… w celu opisania interfejsÃ³w API dla aplikacji RESTful. Celem tej inicjatywy byÅ‚o stworzenie uniwersalnego formatu, ktÃ³ry uÅ‚atwiÅ‚by projektowanie, budowanie, dokumentowanie oraz korzystanie z interfejsÃ³w API.

W dokumentacji zgodnej ze [standardem OpenAPI](https://learn.openapis.org/) znajdziemy:

- aktualnie wspieranÄ… wersjÄ™ API i metadane serwisu (autora, przeznaczenie, rodzaj usÅ‚ug)
- lokalizacjÄ™ poszczegÃ³lnych serwerÃ³w (testowych, produkcyjnych, pre-produkcyjnych)
- opis endpointÃ³w wystawianych w ramach API
- opis metod, jakie wspierajÄ… poszczegÃ³lne endpointy
- opis przyjmowanych parametrÃ³w i nagÅ‚Ã³wkÃ³w
- opis metod autoryzacji
- opis formatu i typÃ³w danych zwracanych z API
- opis przykÅ‚adowych obiektÃ³w, jakie pojawiÄ… siÄ™ w odpowiedzi na zapytanie

DokumentacjÄ™ zgodnÄ…Â ze standardem OpenAPI moÅ¼emy rozwijaÄ‡ w formatach JSON i YAML, a jej przykÅ‚adowy schemat _(schema)_ w obowiÄ…zujÄ…cej wersji 3.0 znajdziesz poniÅ¼ej. ZauwaÅ¼, jak przystÄ™pny jest to standard - nawet bez wprowadzenia, z Å‚atwoÅ›ciÄ… zrozumiesz dziaÅ‚anie tego API:

```yaml
openapi: 3.0.0
info:
  title: Platforma szkoleÅ„ dla programistÃ³w
  description: To API pozwala uzyskiwaÄ‡ informacje o moduÅ‚ach i lekcjach naszych szkoleÅ„
  version: 1.0.0
servers:
  - url: 'https://api.przeprogramowani.pl/courses/v1'
paths:
  /module/{moduleId}:
    get:
      summary: Pobierz szczegÃ³Å‚y moduÅ‚u
      operationId: getModule
      parameters:
        - name: moduleId
          in: path
          required: true
          schema:
            type: string
          description: ID moduÅ‚u do pobrania
      responses:
        '200':
          description: OdpowiedÅº ze szczegÃ³Å‚ami moduÅ‚u zakoÅ„czona sukcesem
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Module'
        '404':
          description: ModuÅ‚ o wybranym ID nie zostaÅ‚ znaleziony
  /lesson/{lessonId}:
    get:
      summary: Pobierz szczegÃ³Å‚y lekcji
      operationId: getLesson
      parameters:
        - name: lessonId
          in: path
          required: true
          schema:
            type: string
          description: ID lekcji do pobrania
      responses:
        '200':
          description: OdpowiedÅº ze szczegÃ³Å‚ami lekcji zakoÅ„czona sukcesem
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Lesson'
        '404':
          description: Lekcja o wybranym ID nie zostaÅ‚a znaleziona
components:
  schemas:
    Module:
      type: object
      properties:
        moduleId:
          type: string
          description: Unikalny identyfikator moduÅ‚u
        title:
          type: string
          description: TytuÅ‚ moduÅ‚u
        description:
          type: string
          description: KrÃ³tki opis zawartoÅ›ci moduÅ‚u
        lessons:
          type: array
          items:
            $ref: '#/components/schemas/Lesson'
    Lesson:
      type: object
      properties:
        lessonId:
          type: string
          description: Unikalny identyfikator lekcji
        title:
          type: string
          description: TytuÅ‚ lekcji
        content:
          type: string
          description: SzczegÃ³Å‚owy opis lekcji i poruszanych zagadnieÅ„
```

DokumentacjÄ™ w formacie OpenAPI moÅ¼esz poznaÄ‡ i rozwijaÄ‡ na dwa sposoby. Pierwszy to zapoznanie siÄ™ z [oficjalnÄ… dokumentacjÄ…](https://swagger.io/specification/), ktÃ³ra przedstawi ci najwaÅ¼niejsze skÅ‚adowe tego standardu, a drugi to narzÄ™dzia, ktÃ³re na podstawie konkretnych danych wejÅ›ciowych wygenerujÄ… jÄ… dla ciebie automatycznie:

- [tsoa](https://tsoa-community.github.io/docs/) - Tworzenie specyfikacji na podstawie dekoratorÃ³w TypeScript
- [zod-to-openapi](https://github.com/asteasolutions/zod-to-openapi) - Tworzenie specyfikacji na podstawie schematu danych biblioteki Zod (o tym pÃ³Åºniej)
    
Samo generowanie specyfikacji dotyczy bardziej backendu niÅ¼Â frontendu, wiÄ™c zainteresowanych zachÄ™camy do poznania tych narzÄ™dzi we wÅ‚asnym zakresie, ale byÄ‡ moÅ¼e zastanawiasz siÄ™, jak tego typu dokumentacja przekÅ‚ada siÄ™ na pracÄ™ na stanowisku frontend developera. W koÅ„cu nie znajdziemy tutaj informacji o komponentach, frameworkach czy bibliotekach, z ktÃ³rych zbudowana jest twoja aplikacja, wiÄ™c na ile wnosi ona realnÄ… wartoÅ›Ä‡ dla nas, frontendowcÃ³w?

W poniÅ¼szym filmie zobaczysz jak OpenAPI pomaga Å‚atwiej i szybciej budowaÄ‡ klienty http, czyli moduÅ‚y, dziÄ™ki ktÃ³rym z takim API siÄ™ poÅ‚Ä…czymy:

**ğŸ“ Te fragmenty znajdziesz w projekcie examples/module2/lesson3/acme-client oraz openapi-spec**

PodsumowujÄ…c - dziÄ™ki specyfikacji OpenAPI przestajemy tworzyÄ‡ alternatywnÄ… rzeczywistoÅ›Ä‡ frontendowÄ…, w ktÃ³rej opisujemy modele i metody wystawiane przez backend, a trzymamy siÄ™ ÅºrÃ³dÅ‚a prawdy jakim jest plik JSON albo YAML z opisem backendu. Tak jak wspominamy na filmie, pierwsze podejÅ›cie do generowania klientÃ³w realizujemy rÄ™cznie, natomiast w module poÅ›wiÄ™conym CI/CD zobaczysz, jak pracÄ™ z generatorami moÅ¼na automatyzowaÄ‡Â przez Github Actions.

Przedstawiony na filmie generator znajdziesz tutaj - [https://openapi-generator.tech/](https://openapi-generator.tech/)

### **Ekosystem narzÄ™dzi**

Przedstawiony na poprzednim filmie OpenAPI Generator to tylko jeden z wielu przykÅ‚adÃ³w tego, jak wiele zalet przynosi spÃ³jny format dokumentowania API.

OgromnÄ… zaletÄ… standardu, jakim jest OpenAPI, jest wytworzony wokÃ³Å‚ niego ekosystem bibliotek, edytorÃ³w i narzÄ™dzi, ktÃ³re ten format rozumiejÄ…. TwÃ³rcy tych rozwiÄ…zaÅ„ mogÄ… skupiÄ‡ siÄ™ na dowoÅ¼eniu konkretnych usprawnieÅ„ na poszczegÃ³lnych etapach procesu wytwarzania oprogramowania bo wiedzÄ…, Å¼e niezaleÅ¼nie od zadania mogÄ… pracowaÄ‡ z jednym i tym samym formatem danych o endpointach, metodach i parametrach.

Jednym z takich narzÄ™dzi jest **Swagger Editor,** ktÃ³ry pozwala przetestowaÄ‡Â czy nasza specyfikacja moÅ¼e byÄ‡ wykorzystania do utworzenia _live docsÃ³w_ opartych o standard OpenAPI.

W ramach Ä‡wiczenia, skopiuj powyÅ¼szy wycinek dokumentacji i wklej go do edytora na stronie [https://editor.swagger.io/](https://editor.swagger.io/) - przetestuj dokumentacjÄ™ i jej poszczegÃ³lne sekcje po prawej:

PozostajÄ…c w edytorze, sprÃ³buj teraz wprowadziÄ‡ nowy endpoint sÅ‚uÅ¼Ä…cy do dodawania lekcji, wykorzystujÄ…c poniÅ¼szy fragment specyfikacji:

```yaml
  /lesson:
    post:
      summary: Dodaje nowÄ… lekcjÄ™
      operationId: addLesson
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - description
              properties:
                title:
                  type: string
                  example: 'Wprowadzenie do React'
                description:
                  type: string
                  example: 'Podstawowe pojÄ™cia i pierwsze kroki w React.'
      responses:
        '201':
          description: Lekcja zostaÅ‚a pomyÅ›lnie dodana
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: Unikalny identyfikator nowo dodanej lekcji
                    example: '123e4567-e89b-12d3-a456-426614174000'
                  title:
                    type: string
                    example: 'Wprowadzenie do React'
                  description:
                    type: string
                    example: 'Podstawowe pojÄ™cia i pierwsze kroki w React.'
        '400':
          description: NieprawidÅ‚owe Å¼Ä…danie, brakuje tytuÅ‚u lub opisu
        '500':
          description: BÅ‚Ä…d serwera
```

DziÄ™ki tej zmianie twoja dokumentacja powinna siÄ™ wzbogaciÄ‡ o nowÄ… sekcjÄ™, a to wszystko bez dopisywania jakiejkolwiek linijki kodu frontendowego:

JeÅ›li udaÅ‚o ci siÄ™ zaktualizowaÄ‡ podglÄ…d dokumentacji, to moÅ¼esz teraz przejÅ›Ä‡ do budowania podobnych _live docsÃ³w_ w twojej firmie (z naszego doÅ›wiadczenia, to wÅ‚aÅ›nie frontend developerzy byli przypisywani do tego typu zadaÅ„). Niestety, nie wykorzystasz do tego Swagger Editora, ktÃ³ry jest usÅ‚ugÄ… online, ale moÅ¼esz wykorzystaÄ‡ popularnÄ…Â bibliotekÄ™ [**swagger-ui**](https://www.npmjs.com/package/swagger-ui), ktÃ³ra pomoÅ¼e ci zbudowaÄ‡ identycznÄ… aplikacjÄ™ gotowÄ… do wystawienia dla klientÃ³w.

Co ciekawe, OpenAPI tak bardzo przyjÄ™Å‚o siÄ™ w ekosystemie aplikacji webowych, Å¼e dzisiaj w oparciu o ten format powstajÄ… niezaleÅ¼ne produkty takie jak [Readme.com](https://readme.com/)â€¦

â€¦czy prezentowane wczeÅ›niej ( ) Custom GPTs w ramach ChataGPT, ktÃ³re uczÄ… siÄ™ obsÅ‚ugi APIÂ wÅ‚aÅ›nie na podstawie poznanej przez ciebie specyfikacji:

Jak sam widzisz, OpenAPI to szeroko akceptowany standard dokumentacji, ktÃ³rego powinniÅ›my nie tylko pobieraÄ‡ integrujÄ…c siÄ™ z nowym API, ale teÅ¼ promowaÄ‡, kiedy rozmawiamy ze znajomymi programistami i moÅ¼emy mieÄ‡ wpÅ‚yw na firmowÄ… infrastrukturÄ™.

Od teraz, kiedy znajomy backend developer poprosi ciÄ™ o zbudowanie interaktywnej dokumentacji dla jego serwisu, wÅ‚aÅ›ciwÄ… odpowiedziÄ… bÄ™dzie:

- ChÄ™tnie to zrobiÄ™, ale najpierw podrzuÄ‡ mi spec w formacie OpenAPI âœ…