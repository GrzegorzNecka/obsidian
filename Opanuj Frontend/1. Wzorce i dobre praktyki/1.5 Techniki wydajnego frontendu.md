**Wprowadzenie**

W poprzednich lekcjach:

- poznaÅ‚eÅ› wzorce i dobre praktyki rozwijania kodu na frontendzie
    
- poznaÅ‚eÅ› sposoby na zarzÄ…dzanie stanem aplikacji w kontrolowany sposÃ³b
    
- poznaÅ‚eÅ› techniki skutecznej komunikacji http
    

ChociaÅ¼ kaÅ¼da z tych lekcji wpÅ‚ywaÅ‚a poÅ›rednio na koÅ„cowÄ… jakoÅ›Ä‡ aplikacji (o czym szerzej w drugim module), to do tej pory przede wszystkim skupialiÅ›my siÄ™ na inÅ¼ynieryjnej stronie rozwijania naszych projektÃ³w. Warto jednak pamiÄ™taÄ‡, Å¼e z perspektywy odbiorcy naszej pracy, stosowanie (lub nie) konkretnego wzorca projektowego, jÄ™zyka programowania czy biblioteki jest drugorzÄ™dne.

Dlatego wÅ‚aÅ›nie w tej lekcji idziemy krok dalej, poznajÄ…c metody i techniki budowania aplikacji przyjaznych uÅ¼ytkownikowi koÅ„cowemu. Poznamy obiektywne i subiektywne sposoby oceny jakoÅ›ci aplikacji, zobaczymy jakie anty-wzorce pojawiajÄ… siÄ™ w aplikacjach client-side, a nastÄ™pnie nauczymy siÄ™ zarzÄ…dzania czÄ™sto pojawiajÄ…cymi siÄ™ problemami.

Ta wiedza pozwoli ci bardziej Å›wiadomie wdraÅ¼aÄ‡ wszystkie porady przedstawione w pierwszym module kursu Opanuj Frontend: AI Edition.

## Ocena jakoÅ›ci aplikacji

OceniajÄ…c jakoÅ›Ä‡ aplikacji musimy braÄ‡ pod uwagÄ™ zarÃ³wno obiektywne metryki i narzÄ™dzia oceniajÄ…ce tworzony produkt, jak i subiektywne wraÅ¼enia uÅ¼ytkownikÃ³w, ktÃ³rzy zdecydowanie nie chcÄ… wchodziÄ‡ w rolÄ™Â testerÃ³w.

### DoÅ›wiadczenia osobiste

W czasach, kiedy kaÅ¼dy z nas jest podÅ‚Ä…czony do internetu caÅ‚Ä… dobÄ™, a nasze smartfony i komputery pozwalajÄ… nieustannie zmieniaÄ‡ i testowaÄ‡ nowe aplikacje, jakoÅ›Ä‡ tworzonych przez programistÃ³w rozwiÄ…zaÅ„ jest poddawana nieustannej prÃ³bie.

Å»eby przekonaÄ‡ siÄ™ jak bardzo wymagajÄ…cy stali siÄ™ uÅ¼ytkownicy, wystarczy tylko odwiedziÄ‡ miejsca takie jak sklep Google Play czy App Store i poczytaÄ‡ recenzje publikowanych tam nowoÅ›ci. JeÅ›li aplikacja Å‚aduje siÄ™ zbyt wolno, stan uÅ¼ytkownika nie jest przechowywany w poprawny sposÃ³b, a nawigacje i zmiany widokÃ³w zajmujÄ… dÅ‚ugie minuty, uÅ¼ytkownicy natychmiast porzucÄ… nasze rozwiÄ…zanie w poszukiwaniu lepszych alternatyw.

> Wg badaÅ„ firmy Google z 2016r., aÅ¼ 53% wizyt jest porzucanych jeÅ›li strona na urzÄ…dzeniu mobilnym Å‚aduje siÄ™ **dÅ‚uÅ¼ej niÅ¼ 3 sekundy**. JeÅ›li Å‚adowanie zajmuje aÅ¼ 10 sekund, szansa porzucenia wizyty wzrasta o 123% - [ÅºrÃ³dÅ‚o](https://www.thinkwithgoogle.com/consumer-insights/consumer-trends/mobile-site-load-time-statistics/) / [ÅºrÃ³dÅ‚o](https://www.thinkwithgoogle.com/marketing-strategies/app-and-mobile/mobile-page-speed-new-industry-benchmarks/)

![[Pasted image 20240510130457.png]]


W kontekÅ›cie aplikacji frontendowych, na tzw. â€œ**perceived performance**â€, czyli subiektywnie odczuwanÄ… wydajnoÅ›Ä‡ i jakoÅ›Ä‡ aplikacji, moÅ¼e wpÅ‚ywaÄ‡ m.in.:

- obsÅ‚uga stanÃ³w Å‚adowania aplikacji (czy uÅ¼ytkownik wie co wÅ‚aÅ›ciwie siÄ™ dzieje?)
    
- obsÅ‚uga bÅ‚Ä™dÃ³w w aplikacji (czy uÅ¼ytkownik moÅ¼e ponowiÄ‡ akcjÄ™?)
    
- obsÅ‚uga pogorszonego poÅ‚Ä…czenia z internetem i trybu offline (czy dane pozostajÄ… na ekranie?)
    
- obsÅ‚uga duÅ¼ych i maÅ‚ych zbiorÃ³w danych (czy lista z tysiÄ…cami elementÃ³w zamraÅ¼a interfejs?)
    
- feedback aplikacji do akcji uÅ¼ytkownika (czy uÅ¼ytkownik wie o poprawnie wykonanej akcji?)
    
- szybkoÅ›Ä‡ Å‚adowania zasobÃ³w takich jak obrazki i pliki (czy uÅ¼ytkownik traci pakiet danych?)
    
- przewidywalne zachowanie interfejsu uÅ¼ytkownika (czy elementy pozostajÄ… na swoim miejscu?)
    

Wszystkie te czynniki wpÅ‚ywajÄ… na to, jakie skojarzenia ma uÅ¼ytkownik myÅ›lÄ…c o naszej aplikacji. JeÅ›li bÄ™dÄ… to skojarzenia pozytywne, moÅ¼emy siÄ™ spodziewaÄ‡ dalszego polecania i rekomendacji. JeÅ›li bÄ™dÄ… to skojarzenia negatywne, to spadek aktywnoÅ›ci szybko pokaÅ¼e nam monitoring, a o konsekwencjach poinformuje szef albo dziaÅ‚ finansÃ³w.

Na potrzeby tej lekcji przygotowaliÅ›my aplikacjÄ™, ktÃ³rÄ… postaramy siÄ™ zoptymalizowaÄ‡ wdraÅ¼ajÄ…c konkretne metody i narzÄ™dzia poprawiajÄ…ce doÅ›wiadczenia uÅ¼ytkownika.

Zobacz, jak wyglÄ…da jej stan poczÄ…tkowy:


GÅ‚Ã³wne problemy, ktÃ³re moÅ¼na zauwaÅ¼yÄ‡ na pierwszy rzut oka, to:

- dÅ‚ugi czas Å‚adowania komponentÃ³w
    

- dÅ‚ugi czas Å‚adowania danych (artykuÅ‚Ã³w, komentarzy, autorÃ³w)
    
- dÅ‚ugi czas oczekiwania na akcje uÅ¼ytkownika (zapis komentarza)
    
- brak informacji zwrotnej dla uÅ¼ytkownika (zarÃ³wno w trakcie Å‚adowania i zapisywania danych)
    

Zanim przejdziemy do rozwiÄ…zywania tych problemÃ³w, zobaczmy jeszcze, jakie narzÄ™dzia mogÄ… nam pomÃ³c oceniÄ‡ stan naszej aplikacji w bardziej obiektywny sposÃ³b.

### Obiektywne metryki

Obecnie najpopularniejszymi metrykami, wzglÄ™dem ktÃ³rych moÅ¼emy porÃ³wnywaÄ‡ jakoÅ›Ä‡ stron i aplikacji internetowych, sÄ… wskaÅºniki **Web Vitals** rozwijane przez Google.

> Web Vitals - an initiative to provide unified guidance for quality signals that are essential to delivering a great user experience on the web. - [ÅºrÃ³dÅ‚o](https://web.dev/explore/learn-core-web-vitals)

Google zaznacza, Å¼e Web Vitals to wskaÅºniki, ktÃ³re bÄ™dÄ… ewoluowaÄ‡ wraz z tym, jak zmienia siÄ™ nasz sposÃ³b korzystania z internetu i aplikacji webowych. MajÄ… one rÃ³wnieÅ¼ promowaÄ‡ dobre praktyki budowania interfejsÃ³w uÅ¼ytkownika pod kÄ…tem uÅ¼ytkownika koÅ„cowego, a nie technicznych statystyk pokroju szybkoÅ›ci odpowiedzi z backendu lub iloÅ›ci bajtÃ³w, ktÃ³re pobiera przeglÄ…darka.

Na dzisiaj (do 12 marca 2024r.) w skÅ‚ad tzw. Core Web Vitals wchodzÄ… trzy metryki:

[**Largest Contentful Paint (LCP)**](https://web.dev/articles/lcp): to metryka skupiona na pomiarze odczuwalnej szybkoÅ›ci Å‚adowania strony internetowej, mierzona do czasu pojawienia siÄ™ na ekranie najwaÅ¼niejszej treÅ›ci dla uÅ¼ytkownika. Czym jest ta najwaÅ¼niejsza treÅ›Ä‡? Dla uÅ‚atwienia pomiarÃ³w, za referencjÄ™ przyjmuje siÄ™ najwiÄ™kszy element interaktywny (img, image, video) lub blok tekstu, ktÃ³ry wyÅ›wietla przeglÄ…darka w trakcie wejÅ›cia na stronÄ™ po raz pierwszy.

WartoÅ›Ä‡ docelowa dla LCP to czas poniÅ¼ej 2.5 sekundy, powyÅ¼ej 4s strona uwaÅ¼ana jest za zbyt wolnÄ….

PamiÄ™taj, Å¼e LCP nie oznacza wprost â€œpeÅ‚nego zaÅ‚adowania siÄ™ stronyâ€, co dobrze pokazuje zestaw screenshotÃ³w ze strony web.dev (poniÅ¼ej). Za element istotny dla LCP uznaje siÄ™ najwiÄ™kszy blok tekstu, ktÃ³ry jest widoczny na poczÄ…tkowych etapach Å‚adowania strony. Mniejsze elementy nie wpÅ‚ywajÄ… na tÄ™ metrykÄ™:

![[Pasted image 20240510130541.png]]

[(ÅºrÃ³dÅ‚o)](https://web.dev/articles/lcp)

[**Cumulative Layout Shift (CLS)**](https://web.dev/articles/cls): to metryka okreÅ›lajÄ…ca stabilnoÅ›Ä‡ layoutu stron i aplikacji internetowych. StabilnoÅ›Ä‡ okreÅ›la siÄ™ mierzÄ…c zachowanie poszczegÃ³lnych elementÃ³w na stronie, oraz wpÅ‚yw ich Å‚adowania na caÅ‚oÅ›ciowy wyglÄ…d strony internetowej. Ma ona zapobiec umieszczaniu na stronie niekontrolowanych, dynamicznie zmieniajÄ…cych rozmiar fontÃ³w, widgetÃ³w i wszystkich innych osadzanych elementÃ³w, ktÃ³re w trakcie Å‚adowania wpÅ‚ywajÄ… na sÄ…siednie fragmenty DOM. Z jej mierzenia wyklucza siÄ™ akcje zainicjowane przez uÅ¼ytkownika (tutaj interaktywnoÅ›Ä‡ jest oczekiwana i zrozumiaÅ‚a).

SzczegÃ³Å‚owy algorytm pomiaru CLS znajdziesz [w tym miejscu](https://web.dev/articles/cls).

![[Pasted image 20240510130552.png]][(ÅºrÃ³dÅ‚o)](https://web.dev/articles/cls)

Relatywna wartoÅ›Ä‡ docelowa dla CLS to poniÅ¼ej 0.1, a powyÅ¼ej 0.25 interfejs uwaÅ¼any jest za niestabilny.

[**First Input Delay (FID)**](https://web.dev/articles/fid): ta metryka okreÅ›la czas, jaki upÅ‚ywa od pierwszej interakcji uÅ¼ytkownika ze stronÄ… (klikniÄ™cie w link, przycisk, wysÅ‚anie formularza), do czasu obsÅ‚ugi zdarzenia przez przeglÄ…darkÄ™. Mierzenie FID ma pomÃ³c optymalizowaÄ‡ interfejs i umoÅ¼liwiaÄ‡ jak najszybszÄ… interakcjÄ™ uÅ¼ytkownika z tym, co zobaczyÅ‚ na ekranie. Negatywny wpÅ‚yw na FID moÅ¼e mieÄ‡ Å‚adowanie i procesowanie duÅ¼ego fragmentu kodu JavaScript, co blokuje gÅ‚Ã³wny wÄ…tek przeglÄ…darki do czasu zinterpretowania caÅ‚ej treÅ›ci.

WartoÅ›Ä‡ docelowa dla FID to czas poniÅ¼ej 100ms, powyÅ¼ej 300ms aplikacja uwaÅ¼ana jest za zbyt wolnÄ….

**WaÅ¼ne - od 12 marca 2024r. metryka FID zostanie zamieniona przez INP:**

[Interaction to Next Paint (INP)](https://web.dev/articles/inp): INP to metryka, ktÃ³ra w zaÅ‚oÅ¼eniu ma lepiej oddawaÄ‡ tÄ™ czÄ™Å›Ä‡Â audytu, ktÃ³ra wczeÅ›niej byÅ‚a mierzona przez FID. O ile FID skupiaÅ‚ siÄ™ na czasie obsÅ‚ugi pierwszej interakcji ze stronÄ… i gÅ‚Ã³wnie dotyczyÅ‚ etapu Å‚adowania aplikacji, INP bÄ™dzie mierzone na przekroju caÅ‚ej historii aktywnoÅ›ci uÅ¼ytkownika ze stronÄ… - juÅ¼ po tym, jak zostaÅ‚a zaÅ‚adowana. A co wÅ‚aÅ›ciwie bÄ™dzie mierzone? Czas od [interakcji uÅ¼ytkownika](https://web.dev/articles/inp#whats_in_an_interaction) do odmalowania interfejsu (tzw. render). Negatywny wpÅ‚yw na INP moÅ¼e mieÄ‡ zÅ‚oÅ¼ony kod JavaScript i wykonywanie operacji obciÄ…Å¼ajÄ…cych zasoby uÅ¼ytkownika w przeglÄ…darce.

![[Pasted image 20240510130609.png]]


[(ÅºrÃ³dÅ‚o)](https://web.dev/articles/inp)

WartoÅ›Ä‡ docelowa dla INP to czas poniÅ¼ej 200ms, powyÅ¼ej 500ms aplikacja uwaÅ¼ana jest za zbyt wolnÄ….

**Pomiar metryk Web Vitals w przeglÄ…darce**

W narzÄ™dziach developerskich przeglÄ…darki Chrome masz moÅ¼liwoÅ›Ä‡ wykonania audytu pod kÄ…tem Core Web Vitals:

(Na powyÅ¼szym filmie pomiar metryk realizujemy w trybie developerskim. W praktyce taki audyt warto przeprowadziÄ‡ na produkcji, z ostatecznym zestawem tego, co lÄ…duje w przeglÄ…darce uÅ¼ytkownika.)

Audyt online zrealizujesz na stronie [PageSpeed Insights](https://pagespeed.web.dev/).

## Optymalizacja strony

PrzejdÅºmy teraz przez konkretne techniki optymalizacji naszej aplikacji, ktÃ³re spowodujÄ… poprawÄ™ doÅ›wiadczeÅ„ uÅ¼ytkownika. Fragmenty prezentowanego kodu bÄ™dÄ… stworzone we frameworku React, jednak nasze porady bez problemu zastosujesz w kaÅ¼dej popularnej technologii frontendowej.

**Profilowanie i rzut oka na kod**

W pierwszym kroku - jeszcze przed rozwiÄ…zaniem jakiegokolwiek problemu - zajmiemy siÄ™ profilowaniem aplikacji.  
  
Profilowanie aplikacji to proces analizy dziaÅ‚ania aplikacji w celu identyfikacji miejsc, ktÃ³re mogÄ… byÄ‡ ÅºrÃ³dÅ‚em problemÃ³w z wydajnoÅ›ciÄ…, takich jak wolne dziaÅ‚anie, nadmierne zuÅ¼ycie pamiÄ™ci, lub inne zasoby systemowe. UmoÅ¼liwia to zrozumienie, jak aplikacja wykonuje poszczegÃ³lne fragmenty kodu w czasie rzeczywistym. DziÄ™ki profilowaniu aplikacji moÅ¼liwe jest identyfikowanie wÄ…skich gardeÅ‚, ktÃ³re mogÄ… wpÅ‚ywaÄ‡ na ogÃ³lnÄ… wydajnoÅ›Ä‡ aplikacji.

Jedno z takich wÄ…skich gardeÅ‚ (_bottleneck_) odkrywamy na filmie poniÅ¼ej:


**Optymalizacja pierwszego zapytania**

Jak rozwiÄ…zaÄ‡ problem zapytania HTTP, ktÃ³re blokuje szybki start naszej aplikacji? PopularnÄ… technikÄ…, ktÃ³ra znana byÅ‚a na dÅ‚ugo przed wzrostem popularnoÅ›ci nowoczesnych frameworkÃ³w frontendowych, jest zastosowanie Server-Side Renderingu (SSR).

SSR to technika, gdzie moÅ¼liwe do zoptymalizowania operacje, takie jak pobieranie konkretnej porcji danych, delegujemy do czÄ™Å›ci serwerowej naszej aplikacji. Na serwerze moÅ¼e siÄ™ odbywaÄ‡ zarÃ³wno renderowanie pierwszej wersji komponentu, ktÃ³ry zostanie pÃ³Åºniej â€œoÅ¼ywionyâ€ w przeglÄ…darce (tzw. _hydracja_), ale teÅ¼ budowanie i wstrzykiwanie danych do szablonÃ³w, z ktÃ³rych korzysta nasza aplikacja.

WÅ‚aÅ›nie to drugie podejÅ›cie zobaczysz na poniÅ¼szym filmie:

Warto dodaÄ‡, Å¼e nowoczesny frontend co raz czÄ™Å›ciej prÃ³buje zacieraÄ‡ granicÄ™ pomiÄ™dzy warstwami aplikacji. Popularne technologie takie jak React i jego Server Components, czy framework Astro z architekturÄ… wyspowÄ…, budujÄ… natywne wsparcie dla rozwijania komponentÃ³w zarÃ³wno na serwerze, jak i w przeglÄ…darce.

MÃ³wiÄ…c o [Astro](https://astro.build/) (i poprzednikach takich jak [Gatsby](https://www.gatsbyjs.com/) czy [Eleventy](https://www.11ty.dev/)) naleÅ¼y jeszcze wspomnieÄ‡ o tzw. SSG (Static-Site Generators), czyli generatorach stron statycznych. SÄ… to frameworki, ktÃ³re z jednej strony pozwalajÄ… nam rozwijaÄ‡ kod w ulubionym frameworku, a z drugiej - juÅ¼ na etapie budowania aplikacji - minimalizujÄ… iloÅ›Ä‡ dostarczanego do klienta JavaScriptu skupiajÄ…c siÄ™ na produkcji statycznych stron opartych o HTML. WszÄ™dzie tam, gdzie priorytetem jest treÅ›Ä‡, a nie rozbudowany interfejs i interaktywne widgety, generatory stron statycznych sprawdzÄ… siÄ™Â znakomicie.

Z naszej strony jeszcze raz rekomendujemy tutaj **Astro**, ktÃ³re wyrasta na lidera tego segmentu (co prawda Astro ma zdecydowanie wiÄ™ksze moÅ¼liwoÅ›ci niÅ¼ SSG, ale o tym w osobnym materiale).

**Optymalizacja renderowania komponentÃ³w**

Kolejna optymalizacja, na ktÃ³rÄ… moÅ¼emy siÄ™ zdecydowaÄ‡, dotyczy struktury komponentÃ³w i tego, kiedy i jakie dane zostajÄ… przez nie pobierane.

W przypadku duÅ¼ych zapytaÅ„ obsÅ‚ugujÄ…cych caÅ‚Ä… stronÄ™ istnieje ryzyko, Å¼e jeden najwolniejszy zasÃ³b zablokuje te fragmenty aplikacji, ktÃ³re mogÅ‚yby byÄ‡ odblokowane zdecydowanie wczeÅ›niej.

PrzykÅ‚adowo, kiedy Å‚adujemy za jednym podejÅ›ciem:

- artykuÅ‚y (w 0.5s)
    
- autorÃ³w (w 0.5s)
    
- komentarze (w 5s)
    

To ostatni zasÃ³b, czyli komentarze, niepotrzebnie wpÅ‚ywajÄ… na dÅ‚ugi (5s) czas oczekiwania na artykuÅ‚y i autorÃ³w, ktÃ³re sÄ… dostÄ™pne zdecydowanie wczeÅ›niej.

Jeden ze sposobÃ³w na rozwiÄ…zanie tego problemu zobaczysz na kolejnym przykÅ‚adzie:


Co waÅ¼ne, zaprezentowana tutaj optymalizacja nie jest tzw. â€œsilver bulletemâ€, czyli rozwiÄ…zaniem, ktÃ³re powinieneÅ› stosowaÄ‡ zawsze i wszÄ™dzie. To tylko jedna z moÅ¼liwoÅ›ci optymalizacji zapytaÅ„ - moÅ¼e siÄ™ okazaÄ‡, Å¼e w twoim projekcie lepiej sprawdzi siÄ™Â mniejsza liczba zapytaÅ„ niÅ¼ wtedy, kiedy kaÅ¼dy komponent pyta backend o swojÄ… porcjÄ™ danych. Ostateczna decyzja naleÅ¼y do ciebie i wynika ze specyfiki aplikacji, ktÃ³rÄ… rozwijasz.

**Dalsza optymalizacja komponentÃ³w**

W powyÅ¼szym przykÅ‚adzie, na skutek optymalizacji struktury komponentÃ³w, wprowadziliÅ›my niestety duplikacjÄ™ pobierania fragmentu danych z backendu. Problem i rozwiÄ…zanie zaprezentuje kolejny przykÅ‚ad, gdzie za lek na problemy posÅ‚uÅ¼y nam [TanStack Query](https://tanstack.com/query/latest). To popularna biblioteka pobierania danych i synchronizacji stanu globalnego, ktÃ³ra - choÄ‡ wywodzi siÄ™ z ekosystemu Reacta - zaczyna byÄ‡ teraz wdraÅ¼ana w ekosystemach Angulara czy Svelte.

TanStack Query to biblioteka, ktÃ³ra pozwala nam w deklaratywny sposÃ³b opisywaÄ‡ poszczegÃ³lne zapytania do backendu, dziÄ™ki czemu moÅ¼e koordynowaÄ‡ jak i kiedy dane zapytanie bÄ™dzie wykonane. JeÅ›li zdarzy siÄ™, Å¼e dwa komponenty prÃ³bujÄ… niezaleÅ¼nie pobieraÄ‡ ten sam zasÃ³b, finalnie zostanie wysÅ‚ane tylko jedno Å¼Ä…danie, a rezultat zostanie udostÄ™pniony w dwÃ³ch fragmentach aplikacji.

JeÅ›li pracujesz z Reactem, moÅ¼esz porÃ³wnaÄ‡ jej moÅ¼liwoÅ›ci z alternatywami - [zobacz ten link](https://tanstack.com/query/latest/docs/framework/react/comparison).

Wielka trÃ³jka frameworkÃ³w (React, Angular, Vue) eksperymentuje z natywnym sposobem kontrolowania komponentÃ³w takich jak stworzony przez nas **_<Placeholder />._**

W przypadku Reacta zadba o to [Suspense](https://react.dev/reference/react/Suspense):

```typescript
<Suspense fallback={<Placeholder />}>
  <SomeComponent />
</Suspense>
```

W przypadku Vue zadba o toâ€¦ rÃ³wnieÅ¼ [Suspense](https://vuejs.org/guide/built-ins/suspense.html) (chociaÅ¼Â realizowany nieco inaczej):

```typescript
<Suspense>
  <!-- component with nested async dependencies -->
  <Dashboard />

  <!-- loading state via #fallback slot -->
  <template #fallback>
    <Placeholder />
  </template>
</Suspense>
```

â€¦a w przypadku Angulara zadba o to nowa [skÅ‚adnia](https://angular.dev/guide/defer) tzw. deferrable views (Angular 17+):

```typescript
@defer {
  <large-component />
} @loading (after 100ms; minimum 1s) {
  <placeholder />
}
```

Jak widaÄ‡, raz przyswojona w naszym kursie wiedza przyda siÄ™ w wielu kontekstach ;)

**Optymalizacja interakcji z formularzem**

W jakie kolejnoÅ›ci powinniÅ›my aktualizowaÄ‡ stan aplikacji - przed czy po zapisie danych na backendzie?

Powszechnie stosowanÄ… praktykÄ… jest aktualizowanie interfejsu juÅ¼ po tym, jak backend potwierdzi zapis przekazywanych do niego danych. Mamy gwarancjÄ™ poprawnej kolejnoÅ›ci zdarzeÅ„, moÅ¼emy obsÅ‚ugiwaÄ‡ bÅ‚Ä™dy a takÅ¼e dawaÄ‡ szansÄ™ na ponowienie zapytania.

A co, jeÅ›li chcielibyÅ›my odwrÃ³ciÄ‡ ogÃ³lnie przyjÄ™tÄ… kolejnoÅ›Ä‡ operacji?

Do zÅ‚amania reguÅ‚ zmotywuje nas cytat od samego Pablo Picasso:

> Learn the rules like a pro, so you can break them like an artist.

SzczegÃ³Å‚y wspomnianego hooka _useOptimistic_ znajdziesz [w tym miejscu](https://react.dev/reference/react/useOptimistic).

**Optymalizacja pozostaÅ‚ych elementÃ³w aplikacji**

Temat optymalizacji aplikacji frontendowych jest tak szeroki, Å¼e z Å‚atwoÅ›ciÄ… moglibyÅ›my na jego temat przygotowaÄ‡ odrÄ™bny moduÅ‚ w naszym kursie (jeÅ›li taki moduÅ‚ powstanie w tym roku, w ramach aktualizacji kursu dostaniesz do niego dostÄ™p zupeÅ‚nie za darmo). PostanowiliÅ›my jednak rozpoczÄ…Ä‡ od uniwersalnych fundamentÃ³w, ktÃ³re moÅ¼esz stopniowo testowaÄ‡ i oceniaÄ‡ pod kÄ…tem uÅ¼ytecznoÅ›ci we wÅ‚asnych projektach.

Dodatkowe techniki i zmiany, ktÃ³re pozytywnie wpÅ‚ynÄ… na szybkoÅ›Ä‡ dziaÅ‚ania twojej aplikacji to m.in.:

- Budowanie aplikacji w trybie produkcyjnym, z minifikacjÄ… kodu i usuniÄ™ciem nieuÅ¼ywanych elementÃ³w
    
- Optymalizacja obrazkÃ³w przy pomocy biblioteki [Sharp](https://github.com/lovell/sharp) i [pluginu do Vite](https://github.com/FatehAK/vite-plugin-image-optimizer)
    
- Stosowanie tzw. _lazy modules_, czyli moduÅ‚Ã³w, ktÃ³re sÄ… pobierane na Å¼Ä…danie
    
- Optymalizowanie dÅ‚ugich list elementÃ³w przy pomocy virtual scrolla, np. [TanStack Virtual](https://tanstack.com/virtual/latest)
    
- Stosowanie specyficznych dla danego frameworka technik takich jak [Partial Prerendering](https://nextjs.org/learn/dashboard-app/partial-prerendering)
    
- Testowanie â€œframeworkÃ³w nowej faliâ€, ktÃ³re starajÄ… siÄ™ ograniczaÄ‡ iloÅ›Ä‡ dostarczanego do przeglÄ…darki kodu JavaScript (Svelte, Qwik, Astro)
    

---

## [ğŸ‘¨â€ğŸ’»](https://emojipedia.org/man-technologist) Ä†wiczenia praktyczne:

- **ğŸ‘‰ Zanim rozpoczniesz - Fragment pliku README.md o nazwie â€œZasoby lokalneâ€ opisuje, jak wykorzystaÄ‡ serwer developerski do symulowanego pobierania i zapisu danych. W oparciu o te dane moÅ¼esz zrealizowaÄ‡ poniÅ¼sze Ä‡wiczenia.**
    

- Zbuduj prostÄ… aplikacjÄ™, ktÃ³rÄ… pozwoli ci przetestowaÄ‡ moÅ¼liwoÅ›ci TanStack Query w kontekÅ›cie ulubionego frameworka
    
    - Zaimplementuj pobieranie listy danych z dwÃ³ch niezaleÅ¼nych komponentÃ³w i sprawdÅº, jak TanStack Query radzi sobie z optymalizowaniem zapytaÅ„.
        
    - Zaimplementuj dodawanie nowego obiektu i odÅ›wieÅ¼anie listy elementÃ³w - [useMutation](https://tanstack.com/query/latest/docs/framework/react/guides/mutations#mutation-side-effects).
        
    - MoÅ¼esz stworzyÄ‡ nowy fragment aplikacji w oparciu o ulubiony framework w folderze **practice**
        
- StwÃ³rz aplikacjÄ™ demo, ktÃ³ra korzysta z mechanizmu renderowania optymistycznego. Zaimplementuj odwracanie lub ponawianie zmian na wypadek wystÄ…pienia bÅ‚Ä™dÃ³w na serwerze.
    
    - MoÅ¼esz wykorzystaÄ‡ aplikacjÄ™ z poprzedniego Ä‡wiczenia i wykorzystaÄ‡ TanStack Query
        
    - MoÅ¼esz wykorzystaÄ‡ istniejÄ…cy kod - examples/module1/lesson5/app-performance/routes/AppV3.tsx
        
    - MoÅ¼esz stworzyÄ‡ nowy fragment aplikacji w oparciu o ulubiony framework w folderze **practice**
        

## [ğŸ“š](https://emojipedia.org/books) **MateriaÅ‚y dodatkowe:**

- [https://react.dev/learn/synchronizing-with-effects](https://react.dev/learn/synchronizing-with-effects)
    

- [https://react.dev/learn/you-might-not-need-an-effect#fetching-data](https://react.dev/learn/you-might-not-need-an-effect#fetching-data)
    

- [https://web.dev/articles/optimize-long-tasks](https://web.dev/articles/optimize-long-tasks)